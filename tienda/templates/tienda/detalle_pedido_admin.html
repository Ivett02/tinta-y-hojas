{% extends 'tienda/base.html' %}

{% block content %}
<div class="card" style="max-width: 800px; margin: 40px auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #800000; padding-bottom: 10px;">
        <h2 style="margin: 0; color: #800000;">üßæ Detalle del Pedido #{{ pedido.id }}</h2>
        <a href="{% url 'dashboard_admin' %}" class="btn" style="background-color: #666;">‚Üê Volver al Panel</a>
    </div>

    <div style="margin-top: 20px; background: #f9f9f9; padding: 20px; border-radius: 8px;">
        <p><strong>Cliente:</strong> {{ pedido.usuario.username }} ({{ pedido.usuario.email }})</p>
        <p><strong>Fecha:</strong> {{ pedido.fecha_pedido|date:"d F Y, H:i" }}</p>
        <p><strong>Direcci√≥n de Env√≠o:</strong> {{ pedido.direccion_envio }}</p>
        <p><strong>M√©todo de Pago:</strong> {{ pedido.metodo_pago }}</p>
        <p><strong>Estado Actual:</strong> 
            <span style="padding: 4px 8px; border-radius: 4px; background: #eee; font-weight: bold;">
                {{ pedido.get_estado_display }}
            </span>
        </p>
    </div>

    <h3 style="margin-top: 30px;">Libros Comprados</h3>
    <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
        <thead style="background-color: #333; color: white;">
            <tr>
                <th style="padding: 10px;">Libro</th>
                <th style="padding: 10px;">Precio Unit.</th>
                <th style="padding: 10px;">Cantidad</th>
                <th style="padding: 10px;">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 10px;">{{ item.libro.titulo }}</td>
                <td style="padding: 10px;">${{ item.precio_unitario }}</td>
                <td style="padding: 10px; text-align: center;">{{ item.cantidad }}</td>
                <td style="padding: 10px;">${{ item.precio_unitario }} * {{ item.cantidad }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 20px; text-align: right; font-size: 1.2rem;">
        <p>Subtotal: ${{ pedido.subtotal }}</p>
        <p>Impuestos (16%): ${{ pedido.impuestos }}</p>
        <p style="font-weight: bold; font-size: 1.5rem; color: #800000;">Total Final: ${{ pedido.total_final }}</p>
    </div>
</div>
{% endblock %}